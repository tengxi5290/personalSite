webpackJsonp([56],{B40l:function(n,e,t){var a=t("Jv3l");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("725d41aa",a,!0,{})},Jv3l:function(n,e,t){e=n.exports=t("FZ+f")(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},rS7Q:function(n,e,t){"use strict";function a(n){t("B40l")}Object.defineProperty(e,"__esModule",{value:!0});var i=t("5HJ5"),o=t("nSkA"),r={mixins:[i.a],data:function(){return{params:{},regDefId:0,tableData:null,defaultList:[]}},methods:{addDefault:function(n){var e={};e.command=n,this.routerLink("/model/add","save",0,e)},getDefaultModel:function(){var n=this,e=this.$api.defaultModel;o.a.get(e).then(function(e){"0"==e.data.errorCode?n.defaultList=e.data.data:e.data.errorMessage?n.errorMessage(e.data.errorMessage):n.errorMessage("请求失败")})},checkP:function(n){/^([1-9]\d{0,3}|0)$/.test(n.priority)?(this.$set(this.params,"enables",n.enable),this.$set(this.params,"priorities",n.priority),this.$set(this.params,"ids",n.id)):this.open()},open:function(){var n=this;this.$alert("排列顺序不能为空且不能超过4位数","提示",{confirmButtonText:"确定",callback:function(e){n.initTableData(n.$api.modelList,n.params)}})},getTableData:function(n){var e=this;this.loading=!0,this.$http.post(this.listUrl,n).then(function(n){n.totalCount&&(e.total=n.totalCount),e.tableData=n.body,e.getRegRefId(n.body),e.loading=!1}).catch(function(n){e.loading=!1})},getPriority:function(n){var e=[];for(var t in n)e.push(n[t].priority);return e.join(",")},getDisableds:function(n){var e=[];for(var t in n)e.push(n[t].enable);return e.join(",")},getRegRefId:function(n){for(var e in n)if(n[e].def){this.regDefId=n[e].id;break}}},created:function(){this.$store.dispatch("setCollapse",!0),this.initTableData(this.$api.modelList,this.params),this.getDefaultModel()}},l=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("section",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"cms-body"},[t("div",{staticClass:"cms-list-header"},[t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/model/add",expression:"'/model/add'"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){n.routerLink("/model/add","save",0)}}},[n._v("添加自定义模型")]),n._v(" "),t("el-dropdown",{on:{command:n.addDefault}},[t("el-button",{attrs:{type:"primary"}},[n._v("\n             添加默认模型"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},n._l(n.defaultList,function(e,a){return t("el-dropdown-item",{key:a,attrs:{command:e.id}},[n._v(n._s(e.showName))])}))],1)],1),n._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:n.tableData,stripe:""},on:{"selection-change":n.checkIds}},[t("el-table-column",{attrs:{type:"selection",width:"65",align:"right"}}),n._v(" "),t("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"name",label:"模型名字",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"showName",label:"展示名字",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"priority",label:"排列顺序",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return t("div",{},[t("el-input",{staticClass:"w50",attrs:{type:"number"},on:{blur:function(t){n.checkP(e.row)}},model:{value:e.row.priority,callback:function(t){n.$set(e.row,"priority",t)},expression:"scope.row.priority"}})],1)}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"enable",label:"可用",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return t("div",{},[t("el-checkbox",{model:{value:e.row.enable,callback:function(t){n.$set(e.row,"enable",t)},expression:"scope.row.enable"}})],1)}}])}),n._v(" "),t("el-table-column",{attrs:{label:"内容模型操作",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return t("div",{},[t("a",{staticClass:"link",attrs:{href:"javascript:void(0)"},on:{click:function(t){n.routerLink("/contentModel/list","list",0,{modelId:e.row.id,isChannel:!1,modelName:e.row.showName})}}},[n._v("[内容模型]")])])}}])}),n._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return t("div",{},[t("cms-button",{directives:[{name:"perms",rawName:"v-perms",value:"/model/edit",expression:"'/model/edit'"}],attrs:{type:"edit"},nativeOn:{click:function(t){n.routerLink("/model/edit","update",e.row.id)}}})],1)}}])})],1),n._v(" "),t("div",{staticClass:"cms-list-footer"},[t("div",{staticClass:"cms-left"},[n.disabled?t("el-button",{attrs:{disabled:""}},[n._v("保存")]):t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/model/priority",expression:"'/model/priority'"}],nativeOn:{click:function(e){n.prioritysBatchs(n.$api.modelPriority,n.ids,n.getPriority(n.checkedList),n.getDisableds(n.checkedList),n.regDefId)}}},[n._v("保存")])],1)])],1)},s=[],d={render:l,staticRenderFns:s},c=d,u=t("VU/8"),p=a,m=u(r,c,!1,p,null,null);e.default=m.exports}});