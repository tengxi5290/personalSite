webpackJsonp([157],{"cfn/":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.tree-left {\n  width: 200px;\n  float: left;\n}\n.tree-right {\n  margin-left: 200px;\n}\n.font-bold {\n  font-weight: bold;\n}\n.red-color {\n  color: red;\n}\n.cms-table-button{\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  line-height:1;\n  border-radius: 4px;\n  background: #000;\n  color: #fff;\n  position: relative;\n  text-align: center;\n  font-size: 14px;\n  top:-2px;\n  margin-left: 2px;\n  -webkit-transition: 0.2s;\n  transition: 0.2s;\n&:first-child{\n    margin-left: 0px;\n}\n&:hover{\n    opacity: 0.65;\n}\n&.edit{\n    background: #17d57e;\n&::after{\n      content: '\\E662';\n      position: relative;\n      top:5px;\n}\n}\n}\n.el-dropdown {\n  vertical-align: top;\n}\n.el-dropdown + .el-dropdown {\n  margin-left: 15px;\n}\n.el-icon-arrow-down {\n  font-size: 12px;\n}\n.el-button-group .el-button--success:last-child {\n  width: 50px;\n  min-width: 50px;\n}\n.el-dialog {\n  width: 80%;\n  margin-top: 50px;\n}\n",""])},clbD:function(e,t,n){var o=n("cfn/");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("e45ba808",o,!0,{})},sRrM:function(e,t,n){"use strict";function o(e){n("clbD")}Object.defineProperty(t,"__esModule",{value:!0});var a=n("5HJ5"),i=n("nSkA"),l={mixins:[a.a],data:function(){return{queryQuote:{title:null,page:1,pageSize:10,channelId:null,modelId:null,siteId:null},queryEnable:!0,modelList:[],siteList:[],contentTable:[],contentTotal:null,underCopy:[],enableCopy:!1,exsitedGroup:[],copyableGroup:[]}},methods:{doQuery:function(){var e=this;this.getQuotedContent(function(){e.getContentList()})},getQuotedContent:function(e){var t=this,n=this.$api.contentCopyCheck+"?thisSiteId="+window.localStorage.getItem("_site_id_param")+"&citeSiteId="+this.queryQuote.siteId;i.a.get(n).then(function(n){if(0==n.data.errorCode){for(var o in n.data.data)-1==t.exsitedGroup.indexOf(n.data.data[o].UUID)&&t.exsitedGroup.push(n.data.data[o].UUID);e()}else n.data.errorMessage?t.errorMessage(n.data.errorMessage):t.errorMessage("请求失败")}).catch(function(e){console.log(e)})},getPages:function(e,t){var n=this;this.queryQuote.page=e,this.queryQuote.pageSize=t,this.getQuotedContent(function(){n.getContentList()})},getContentList:function(){var e=this,t=this.$api.contentQuoteList+"?enable=true&page="+this.queryQuote.page+"&pageSize="+this.queryQuote.pageSize;if(null!==this.queryQuote.title&&(t=t+"&title="+this.queryQuote.title),null!==this.queryQuote.channelId&&(t=t+"&channelId="+this.queryQuote.channelId),null!==this.queryQuote.modelId&&(t=t+"&modelId="+this.queryQuote.modelId),null===this.queryQuote.siteId)return this.errorMessage("请选择一个站点"),!1;t=t+"&siteId="+this.queryQuote.siteId,i.a.get(t).then(function(t){if(0==t.data.errorCode){e.copyableGroup=[],e.contentTable=t.data.data.list,e.contentTotal=t.data.data.total-e.exsitedGroup.length;for(var n in e.contentTable)null!==e.contentTable[n].createTime&&(e.contentTable[n].createTime=Object(i.g)(e.contentTable[n].createTime).slice(5,16)),null!==e.contentTable[n].publishTime&&(e.contentTable[n].publishTime=Object(i.g)(e.contentTable[n].publishTime).slice(5,16)),-1==e.exsitedGroup.indexOf(e.contentTable[n].uuid)&&e.copyableGroup.push(e.contentTable[n])}else t.data.errorMessage?e.errorMessage(t.data.errorMessage):e.errorMessage("请求失败")}).catch(function(e){console.log(e)})},getChannelId:function(e,t){"-1"!=e.id?(this.queryQuote.channelId=e.id,window.localStorage.setItem("currentChannelId",e.id)):this.queryQuote.channelId=null},doQueryModel:function(e){this.queryQuote.modelId="all"==e?null:e},doQuerySite:function(e){this.queryQuote.siteId=e},getUnderCopy:function(e){this.underCopy=e,e.length>0?this.enableCopy=!0:this.enableCopy=!1},copyContent:function(){this.postCopy()},postCopy:function(){var e=this,t=[];for(var n in this.underCopy)t.push(this.underCopy[n].id);t=t.join(",");var o=window.localStorage.getItem("_site_id_param"),a=window.localStorage.getItem("currentChannelId"),l=this.$api.contentCopy+"?contentIds="+t+"&siteId="+o+"&channelIds="+a;i.a.post(l).then(function(t){0==t.data.errorCode?(e.successMessage("操作成功"),e.getQuotedContent(function(){e.getContentList()})):t.data.errorMessage?e.errorMessage(t.data.errorMessage):e.errorMessage("操作失败")}).catch(function(e){console.log(e)})},back:function(){history.go(-1)},getSiteList:function(e){var t=this,n=this.$api.siteAll+"?id="+e;i.a.get(n).then(function(e){0==e.data.errorCode?t.siteList=e.data.data:e.data.errorMessage?t.errorMessage(e.data.errorMessage):t.errorMessage("操作失败")}).catch(function(e){console.log(e)})}},created:function(){var e=window.localStorage.getItem("_site_id_param");this.modelList=JSON.parse(window.localStorage.getItem("modelList")),this.getSiteList(e)},mounted:function(){this.$store.dispatch("setCollapse",!0);var e=document.body.clientHeight;$(".cms-body").css("minHeight",e-110+"px")}},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"cms-body flex"},[n("a",{staticClass:"cms-back",attrs:{href:"javascript:;"},on:{click:e.back}}),e._v(" "),n("cms-tree",{attrs:{hasContent:!0,treeType:"page"},on:{click:e.getChannelId}}),e._v(" "),n("div",{staticClass:"cms-content-right"},[n("div",{staticClass:"cms-list-header clearfix flex"},[n("div",{staticStyle:{"margin-top":"20px","margin-bottom":"20px","margin-right":"20px","margin-left":"20px"}},[n("cms-input",{attrs:{label:"标题",width:240},model:{value:e.queryQuote.title,callback:function(t){e.$set(e.queryQuote,"title",t)},expression:"queryQuote.title"}}),e._v(" "),1==e.queryEnable?n("el-button",{attrs:{type:"primary"},on:{click:e.doQuery}},[e._v("查询")]):n("el-button",{attrs:{type:"primary",disabled:""}},[e._v("查询")]),e._v(" "),n("el-select",{staticClass:"cms-left",staticStyle:{width:"180px"},attrs:{placeholder:"所有类型"},on:{change:e.doQueryModel},model:{value:e.queryQuote.modelId,callback:function(t){e.$set(e.queryQuote,"modelId",t)},expression:"queryQuote.modelId"}},[n("el-option",{attrs:{label:"所有类型",value:"all"}}),e._v(" "),e._l(e.modelList,function(e){return n("el-option",{key:e.id,attrs:{label:e.showName,value:e.id}})})],2),e._v(" "),n("el-select",{staticClass:"cms-left",staticStyle:{width:"180px"},attrs:{placeholder:"站点"},on:{change:e.doQuerySite},model:{value:e.queryQuote.siteId,callback:function(t){e.$set(e.queryQuote,"siteId",t)},expression:"queryQuote.siteId"}},e._l(e.siteList,function(e){return n("el-option",{key:e.id,attrs:{label:e.shortName,value:e.id}})}))],1)]),e._v(" "),n("el-table",{attrs:{data:e.copyableGroup},on:{"selection-change":e.getUnderCopy}},[n("el-table-column",{attrs:{type:"selection",width:"65",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题",align:"center",width:"250"}}),e._v(" "),n("el-table-column",{attrs:{prop:"poster",label:"封面",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return n("div",{},[null!==e.row.poster&&void 0!==e.row.poster?n("img",{attrs:{src:e.row.poster,height:"60",width:"80"}}):n("img",{attrs:{src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1540800848352&di=53c3301bb98d9cbaf75e6ed04e2e6d6a&imgtype=0&src=http%3A%2F%2F58pic.ooopic.com%2F58pic%2F14%2F70%2F68%2F34858PIC6sf_1024.jpg",height:"60",width:"80"}})])}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"weight",label:"权重",align:"center",width:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"modelShowName",label:"类型",align:"center",width:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"spName",label:"sp名称",align:"center",width:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center",width:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"publishTime",label:"发布时间",align:"center",width:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[1==t.row.status?n("span",[e._v("草稿")]):e._e(),e._v(" "),5==t.row.status?n("span",[e._v("已上线")]):e._e(),e._v(" "),6==t.row.status?n("span",[e._v("已下线")]):e._e(),e._v(" "),7==t.row.status?n("span",[e._v("删除")]):e._e()])}}])})],1),e._v(" "),n("div",{staticClass:"cms-list-footer",staticStyle:{"padding-bottom":"100px"}},[e.enableCopy?n("el-button",{attrs:{type:"primary"},on:{click:e.copyContent}},[e._v("复制")]):n("el-button",{attrs:{type:"primary",disabled:""}},[e._v("复制")]),e._v(" "),n("cms-pagination",{attrs:{total:e.contentTotal,pageSize:e.queryQuote.pageSize,page:e.queryQuote.page,init:!0},on:{change:e.getPages}})],1)],1)],1)},s=[],c={render:r,staticRenderFns:s},u=c,d=n("VU/8"),p=o,h=d(l,u,!1,p,null,null);t.default=h.exports}});