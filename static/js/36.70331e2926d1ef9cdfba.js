webpackJsonp([36],{Hkoe:function(t,e,a){var i=a("PXzw");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("0fdc1144",i,!0,{})},PXzw:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.data-item[data-v-a534974a] {\n  float: left;\n  min-width: 170px;\n  margin-top: 30px;\n}\n.data-item .data-title[data-v-a534974a] {\n    font-size: 12px;\n    color: #878d99;\n    margin-bottom: 17px;\n}\n.data-item .data-num[data-v-a534974a] {\n    color: #353535;\n    font-size: 24px;\n}\n.chart-style[data-v-a534974a] {\n  width: 100%;\n  height: 380px;\n  border-bottom: 1px dashed #eee;\n  margin-bottom: 15px;\n}\n",""])},"a+hu":function(t,e,a){"use strict";function i(t){a("Hkoe")}Object.defineProperty(e,"__esModule",{value:!0});var r=a("bOdI"),s=a.n(r),n=(a("mtWM"),a("nSkA")),o={data:function(){var t;return{queryParams:{page:1,pageSize:10,startTime:null,endTime:null},currentSiteName:null,showLine:!1,showPie:!0,spData:[],allTotal:null,dateArr:"",params:{flag:4},time:"",date:{year:"",month:"",day:""},totalMap:[],sum:0,ipsum:0,fksum:0,ipList:[],fkList:[],dataInfo:{pvTotal:0,visitorTotal:0,ipTotal:0,list:[]},chartLine:null,chartPie:null,chartLineOptions:{tooltip:{trigger:"axis"},legend:{data:["点播数量","直播数量","图文数量","日总量"]},grid:{left:"5%",right:"5%",bottom:"14%"},xAxis:{type:"category",splitLine:{show:!1},boundaryGap:!0,data:[]},yAxis:{splitLine:{show:!1},type:"value"},series:[{name:"点播数量",type:"line",showSymbol:!1,smooth:!0,data:[]},{name:"直播数量",type:"line",showSymbol:!1,smooth:!0,data:[]},{name:"图文数量",type:"line",showSymbol:!1,smooth:!0,data:[]},{name:"日总量",type:"line",showSymbol:!1,smooth:!0,data:[]}]},chartPieOptions:{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right",data:["点播数量","直播数量","图文数量"]},series:[(t={name:"统计详情",type:"pie",radius:"55%"},s()(t,"radius",["50%","70%"]),s()(t,"data",[{value:null,name:"点播数量"},{value:null,name:"直播数量"},{value:null,name:"图文数量"}]),t)],color:["#56dea0","#ffbe60","#fa99cb"]}}},methods:{getSpStatistics:function(t,e,a){var i=this,r=this.$api.spStatistic+"?spName="+this.currentSiteName+"&page="+this.queryParams.page+"&pageSize="+this.queryParams.pageSize;null!==t&&""!==t&&void 0!==t&&(r=r+"&startTime="+t),null!==e&&""!==e&&void 0!==e&&(r=r+"&endTime="+e),n.a.get(r).then(function(t){if(0==t.data.errorCode){console.log("拿到的详情数据"),console.log(t),i.spData=t.data.data.list,i.allTotal=t.data.data.total;var e=[],r=[],s=[],o=[],l=[];for(var c in i.spData)null!=i.spData[c].dateTime&&(i.spData[c].dateTime=Object(n.g)(i.spData[c].dateTime),i.spData[c].dateTime=i.spData[c].dateTime.slice(0,10)),1!=i.params.flag&&2!=i.params.flag||(console.log("凑折线图数据"),e.push(Object(n.g)(i.spData[c].createTime).slice(0,10)),r.push(i.spData[c].viNumber),s.push(i.spData[c].lvNumber),o.push(i.spData[c].arNumber),l.push(i.spData[c].dayNumber)),4!=i.params.flag&&6!=i.params.flag||(console.log("凑饼图数据"),i.chartPieOptions.series[0].data[0].value=i.spData[0].viNumber,i.chartPieOptions.series[0].data[1].value=i.spData[0].lvNumber,i.chartPieOptions.series[0].data[2].value=i.spData[0].arNumber);i.chartLineOptions.xAxis.data=e,i.chartLineOptions.series[0].data=r,i.chartLineOptions.series[1].data=s,i.chartLineOptions.series[2].data=o,i.chartLineOptions.series[3].data=l,a()}else t.data.errorMessage?i.errorMessage(t.data.errorMessage):i.errorMessage("操作失败")}).catch(function(t){console.log(t)})},getSiteAbbrName:function(t,e){var a=this;n.a.get(this.$api.site+"/"+t).then(function(t){0==t.data.errorCode?(console.log("站点详情"),console.log(t),a.currentSiteName=t.data.data.shortName,e()):t.data.errorMessage?a.errorMessage(t.data.errorMessage):a.errorMessage("操作失败")}).catch(function(t){console.log(t)})},getNowFormatDate:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();a>=1&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i);var r=e+"-"+a+"-"+i;return this.time=r,r},getYesterday:function(){var t=new Date;t.setTime(t.getTime()-864e5);var e=t.getMonth()+1,a=t.getDate();return e>=1&&e<=9&&(e="0"+e),a>=0&&a<=9&&(a="0"+a),t.getFullYear()+"-"+e+"-"+a},getCurrentMonthFirst:function(){var t=new Date;return t.setDate(1),this.formatDate(t)},getCurrentMonthLast:function(){var t=new Date,e=t.getMonth(),a=++e,i=new Date(t.getFullYear(),a,1);return this.formatDate(new Date(i-864e5))},getSelectDate:function(){var t=new Date,e=t.getDay(),a=t.getDate(),i=t.getMonth(),r=t.getFullYear();return[this.formatDate(new Date(r,i,a-e+1)),this.formatDate(new Date(r,i,a-e+7))]},formatDate:function(t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1,r=e.getDate();return i=i<10?"0"+i:i,r=r<10?"0"+r:r,a+"-"+i+"-"+r},getPages:function(t,e){var a=this;this.queryParams.page=t,this.queryParams.pageSize=e,this.getSiteAbbrName(window.localStorage.getItem("_site_id_param"),function(){a.getSpStatistics(a.queryParams.startTime,a.queryParams.endTime,function(){a.chartLine=echarts.init(document.getElementById("chartLine")),a.chartLine.setOption(a.chartLineOptions),a.chartPie=echarts.init(document.getElementById("chartPie")),a.chartPie.setOption(a.chartPieOptions)})})},rangeTime:function(t){null!=t?(this.params.begin=t[0],this.params.end=t[1],this.params.flag=3,t[0]===t[1]?this.time=t[0]:this.time=t[0]+"-"+t[1]):(this.params.begin="",this.params.end="",this.params.flag=4,this.time=this.date.year+"-"+this.date.month+"-"+this.date.day),this.getDataInfo()},query:function(t){var e=this;switch(t){case 1:case"1":console.log("本月"),this.showLine=!0,this.showPie=!1,this.queryParams.startTime=this.getCurrentMonthFirst(),this.queryParams.endTime=this.getCurrentMonthLast();break;case 2:case"2":console.log("本周"),this.showLine=!0,this.showPie=!1,this.queryParams.startTime=this.getSelectDate()[0],this.queryParams.endTime=this.getSelectDate()[1];break;case 4:case"4":console.log("今日"),this.showLine=!1,this.showPie=!0,this.queryParams.startTime=this.time,this.queryParams.endTime=this.time;break;case 6:case"6":console.log("昨日"),this.showLine=!1,this.showPie=!0,this.queryParams.startTime=this.getYesterday(),this.queryParams.endTime=this.getYesterday()}console.log("所以开始和结束时间是"),console.log(this.queryParams.startTime),console.log("</br>"),console.log(this.queryParams.endTime),this.queryParams.page=1,this.queryParams.pageSize=10,this.getSiteAbbrName(window.localStorage.getItem("_site_id_param"),function(){e.getSpStatistics(e.queryParams.startTime,e.queryParams.endTime,function(){e.chartLine=echarts.init(document.getElementById("chartLine")),e.chartLine.setOption(e.chartLineOptions),e.chartPie=echarts.init(document.getElementById("chartPie")),e.chartPie.setOption(e.chartPieOptions)})})},getXdata:function(t){var e=[];for(var a in t)e.push(t[a][4]);return e},getChartSeriesData:function(t){var e=[];for(var a in t)e.push(t[a][0]);return e},getPieSeriesData:function(t){var e=[];for(var a in t)e.push({name:a,value:t[a]});return e}},mounted:function(){var t=this;this.getNowFormatDate(),this.getSiteAbbrName(window.localStorage.getItem("_site_id_param"),function(){t.queryParams.startTime=t.time,t.queryParams.endTime=t.time,t.getSpStatistics(t.queryParams.startTime,t.queryParams.endTime,function(){t.chartLine=echarts.init(document.getElementById("chartLine")),t.chartLine.setOption(t.chartLineOptions),t.chartPie=echarts.init(document.getElementById("chartPie")),t.chartPie.setOption(t.chartPieOptions)})})}},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"cms-body cms-chart-box"},[a("div",{staticClass:"cms-list-header",staticStyle:{"padding-left":"0"}},[a("h5",{staticClass:"data-header-title"},[t._v("统计详情("+t._s(t.time)+")")]),t._v(" "),a("div",{staticClass:"flex-date"},[a("label",{staticClass:"cms-label",staticStyle:{"margin-left":"0"}},[t._v("日期：")]),t._v(" "),a("el-radio-group",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{change:t.query},model:{value:t.params.flag,callback:function(e){t.$set(t.params,"flag",e)},expression:"params.flag"}},[a("el-radio-button",{attrs:{label:4}},[t._v("今日")]),t._v(" "),a("el-radio-button",{attrs:{label:6}},[t._v("昨日")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("本周")]),t._v(" "),a("el-radio-button",{attrs:{label:1}},[t._v("本月")])],1),t._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.rangeTime},model:{value:t.dateArr,callback:function(e){t.dateArr=e},expression:"dateArr"}})],1)]),t._v(" "),t._m(0),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.spData,stripe:""}},[a("el-table-column",{attrs:{prop:"spName",label:"频道名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dateTime",label:"日期",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"viNumber",label:"点播数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lvNumber",label:"直播数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"arNumber",label:"图文数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dayNumber",label:"日总量",align:"center"}})],1),t._v(" "),a("div",{staticClass:"cms-list-footer",staticStyle:{"padding-bottom":"100px"}},[a("cms-pagination",{attrs:{total:t.allTotal,pageSize:t.queryParams.pageSize,page:t.queryParams.page,init:!0},on:{change:t.getPages}})],1)],1)},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("div",{staticClass:"chart-style",attrs:{id:"chartPie"}}),t._v(" "),a("div",{staticClass:"chart-style",attrs:{id:"chartLine"}})])}],m={render:l,staticRenderFns:c},h=m,u=a("VU/8"),d=i,p=u(o,h,!1,d,"data-v-a534974a",null);e.default=p.exports}});