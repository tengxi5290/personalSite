webpackJsonp([133],{"9ZbD":function(e,t,a){"use strict";function s(e){a("tRJH")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("5HJ5"),n=(a("mtWM"),a("nSkA")),r={mixins:[o.a],data:function(){return{tableData:[],modelList:[],checkedTableItems:[]}},methods:{saveAble:function(){var e=this,t=[],a=[];for(var s in this.checkedTableItems)1==this.checkedTableItems[s].enable?t.push(this.checkedTableItems[s].id):a.push(this.checkedTableItems[s].id);if(t.length>0){var o=this.$api.syncApiEnable+"?ids="+t.join(",");n.a.put(o).then(function(t){"0"==t.data.errorCode?e.successMessage("操作成功"):t.data.errorMessage?e.errorMessage(t.data.errorMessage):e.errorMessage("操作失败")}).catch(function(e){console.log(e)})}if(a.length>0){var r=this.$api.syncApiDisable+"?ids="+a.join(",");n.a.put(r).then(function(t){"0"==t.data.errorCode?e.successMessage("操作成功"):t.data.errorMessage?e.errorMessage(t.data.errorMessage):e.errorMessage("操作失败")}).catch(function(e){console.log(e)})}setTimeout(function(){e.getTableList()},1e3)},getCheckedTableItems:function(e){this.checkedTableItems=e},getTableList:function(){var e=this;n.a.get(this.$api.syncApiList).then(function(t){"0"==t.data.errorCode?e.tableData=t.data.data:t.data.errorMessage?e.errorMessage(t.data.errorMessage):e.errorMessage("请求失败")}).catch(function(e){console.log(e)})},chooseModel:function(e){this.routerLink("/sync/api/add","save","",e)},getSyncModelList:function(){var e=this;n.a.get(this.$api.modelList).then(function(t){"0"==t.data.errorCode?e.modelList=t.data.data:t.data.errorMessage?e.errorMessage(t.data.errorMessage):e.errorMessage("请求失败")}).catch(function(e){console.log(e)})}},created:function(){this.getTableList(),this.getSyncModelList(),this.$store.dispatch("setCollapse",!0)}},l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"cms-body"},[a("div",{staticClass:"cms-list-header flex-between"},[a("el-dropdown",{on:{command:e.chooseModel}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"}},[e._v("添加同步接口")]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.modelList,function(t){return a("el-dropdown-item",{key:t.id,attrs:{command:t}},[e._v(e._s(t.showName))])}))],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.getCheckedTableItems}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"showName",label:"接口名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"modelName",label:"模型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"请求地址",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"method",label:"请求方式",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rule",label:"匹配方式",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[1==t.row.rule?a("span",[e._v("主栏目路径")]):e._e(),e._v(" "),0==t.row.rule?a("span",[e._v("全路径")]):e._e()])}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"enable",label:"可用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("el-checkbox",{model:{value:t.row.enable,callback:function(a){e.$set(t.row,"enable",a)},expression:"scope.row.enable"}})],1)}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("cms-button",{attrs:{type:"edit"},nativeOn:{click:function(a){e.routerLink("/sync/api/update","update",t.row.id,t.row)}}})],1)}}])})],1),e._v(" "),a("div",{staticClass:"cms-list-footer"},[e.checkedTableItems.length>0?a("el-button",{on:{click:e.saveAble}},[e._v("保存更改")]):a("el-button",{attrs:{disabled:""},on:{click:e.saveAble}},[e._v("保存更改")])],1)],1)},c=[],i={render:l,staticRenderFns:c},d=i,u=a("VU/8"),p=s,b=u(r,d,!1,p,null,null);t.default=b.exports},DKr5:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""])},tRJH:function(e,t,a){var s=a("DKr5");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("4d6b6549",s,!0,{})}});