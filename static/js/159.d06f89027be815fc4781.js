webpackJsonp([159],{YgOz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("5HJ5"),s=(a("mtWM"),a("nSkA")),l={mixins:[n.a],data:function(){return{tableData:[],pickedData:[]}},methods:{getTableList:function(){var e=this;s.a.get(this.$api.syncChannelList).then(function(t){"0"==t.data.errorCode?e.tableData=t.data.data:t.data.errorMessage?e.errorMessage(t.data.errorMessage):e.errorMessage("请求失败")}).catch(function(e){console.log(e)})},saveSyncName:function(){var e=this,t=[],a=[];for(var n in this.pickedData)t.push(this.pickedData[n].id),a.push(this.pickedData[n].syncChannel);s.a.put(this.$api.syncChannelUpdate+"?syncChannelIds="+t.join(",")+"&syncChannels="+a.join(",")).then(function(t){"0"==t.data.errorCode?(e.successMessage("操作成功"),setTimeout(function(){e.getTableList()},1e3)):t.data.errorMessage?e.errorMessage(t.data.errorMessage):e.errorMessage("操作失败")}).catch(function(e){console.log(e)})},getSyncModify:function(e){this.pickedData=e}},created:function(){this.getTableList(),this.$store.dispatch("setCollapse",!0)}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"cms-body"},[a("div",{staticClass:"cms-list-header flex-between"},[a("router-link",{attrs:{to:"/sync/channel/add"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"}},[e._v("添加同步栏目")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.getSyncModify}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelId",label:"栏目ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"栏目名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"syncChannel",label:"同步字段",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("el-input",{staticClass:"w80",model:{value:t.row.syncChannel,callback:function(a){e.$set(t.row,"syncChannel",a)},expression:"scope.row.syncChannel"}})],1)}}])})],1),e._v(" "),a("div",{staticClass:"cms-list-footer"},[e.pickedData.length>0?a("el-button",{attrs:{type:"primary"},on:{click:e.saveSyncName}},[e._v("保存同步字段")]):a("el-button",{attrs:{type:"primary",disabled:""}},[e._v("保存同步字段")])],1)],1)},c=[],i={render:r,staticRenderFns:c},o=i,d=a("VU/8"),u=d(l,o,!1,null,null,null);t.default=u.exports}});