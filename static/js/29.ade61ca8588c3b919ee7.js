webpackJsonp([29],{"JM+x":function(t,e,a){var n=a("n892");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("40a6c7c2",n,!0,{})},NFgv:function(t,e,a){"use strict";function n(t){a("JM+x")}Object.defineProperty(e,"__esModule",{value:!0});var i=(a("mtWM"),a("nSkA")),r={data:function(){return{dateArr:"",params:{flag:1,begin:"",statisDay:"",end:""},time:"",date:{year:"",month:"",day:""},dataInfo:{pvTotal:0,visitorTotal:0,ipTotal:0,list:[]},chartLine:null,chartPie:null,chartLineOptions:{tooltip:{trigger:"axis"},legend:{data:["访问次数","访问用户","独立ip","新增用户"]},grid:{left:"5%",right:"2%",bottom:"14%"},xAxis:{type:"category",splitLine:{show:!1},boundaryGap:!0,data:[]},yAxis:{splitLine:{show:!1},type:"value"},series:[{name:"访问次数",type:"line",showSymbol:!1,smooth:!0,data:[]},{name:"访问用户",type:"line",showSymbol:!1,smooth:!0,data:[]},{name:"独立ip",type:"line",showSymbol:!1,smooth:!0,data:[]},{name:"新增用户",type:"line",showSymbol:!1,smooth:!0,data:[]}]},siteName:null}},methods:{getSiteAbbrName:function(t,e){var a=this;i.a.get(this.$api.site+"/"+t).then(function(t){if(0==t.data.errorCode){console.log("站点详情"),console.log(t);var n=void 0;switch(t.data.data.shortName){case"视讯中国":n="sxzg";break;case"娱乐中国":n="ylzg";break;case"视频中国":n="spzg";break;case"直播中国":n="zbzg";break;case"文化中国":n="whzg";break;default:n=null}a.siteName=n,e()}else t.data.errorMessage?a.errorMessage(t.data.errorMessage):a.errorMessage("操作失败")}).catch(function(t){console.log(t)})},getLineDetail:function(t){var e=this,a=this.params.begin,n=this.params.end,i="/api/Daren/dataCount/channel.action?channelId="+this.siteName;""!==a&&""!==n&&(i=i+"&startTime="+a+"&endTime="+n),$.ajax({type:"get",url:i,headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},success:function(a){var n=[],i=[],r=[],s=[],o=[];e.dataInfo.list=a.data;for(var l in a.data)n.push(a.data[l].create_time),i.push(a.data[l].pv),r.push(a.data[l].uv),s.push(a.data[l].uip),o.push(a.data[l].new_user);e.chartLineOptions.xAxis.data=n,e.chartLineOptions.series[0].data=i,e.chartLineOptions.series[1].data=r,e.chartLineOptions.series[2].data=s,e.chartLineOptions.series[3].data=o,t()},error:function(t){console.log(t)}})},rangeTime:function(t){var e=this;null!=t?(this.params.begin=t[0],this.params.end=t[1],this.params.flag=3):(this.params.begin="",this.params.end="",this.params.flag=1),this.getLineDetail(function(){e.chartLine=echarts.init(document.getElementById("chartLine")),e.chartLine.setOption(e.chartLineOptions),window.addEventListener("resize",e.createChart)})},query:function(t){var e=this;switch(t){case 1:case"1":this.params.begin="",this.params.end="";break;case 2:case"2":this.params.begin=this.setDate(this.getCurrentMonthFirst()),this.params.end=this.setDate(this.getCurrentMonthLast());break;case 4:case"4":this.params.begin=this.getNowFormatDate(),this.params.end=this.getNowFormatDate();break;case 6:case"6":this.params.begin=this.getYesterday(),this.params.end=this.getYesterday();break;default:this.params.begin="",this.params.end=""}this.getLineDetail(function(){e.chartLine=echarts.init(document.getElementById("chartLine")),e.chartLine.setOption(e.chartLineOptions),window.addEventListener("resize",e.createChart)})},setDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return a=a<10?"0"+a:a,n=n<10?"0"+n:n,e+"-"+a+"-"+n},getCurrentMonthFirst:function(){var t=new Date;return t.setDate(1),t},getCurrentMonthLast:function(){var t=new Date,e=t.getMonth(),a=++e,n=new Date(t.getFullYear(),a,1);return new Date(n-864e5)},getNowFormatDate:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();a>=1&&a<=9&&(a="0"+a),n>=0&&n<=9&&(n="0"+n);var i=e+"-"+a+"-"+n;return this.time=i,i},getYesterday:function(){var t=new Date;t.setTime(t.getTime()-864e5);var e=t.getMonth()+1,a=t.getDate();return e>=1&&e<=9&&(e="0"+e),a>=0&&a<=9&&(a="0"+a),t.getFullYear()+"-"+e+"-"+a}},created:function(){var t=this;this.getNowFormatDate(),this.getSiteAbbrName(window.localStorage.getItem("_site_id_param"),function(){t.getLineDetail(function(){t.chartLine=echarts.init(document.getElementById("chartLine")),t.chartLine.setOption(t.chartLineOptions),window.addEventListener("resize",t.createChart)})})}},s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"cms-body cms-chart-box"},[a("div",{staticClass:"cms-list-header",staticStyle:{"padding-left":"0"}},[a("h5",{staticClass:"data-header-title"},[t._v("趋势分析("+t._s(t.time)+")")]),t._v(" "),a("div",{staticClass:"flex-date"},[a("label",{staticClass:"cms-label",staticStyle:{"margin-left":"0"}},[t._v("日期：")]),t._v(" "),a("el-radio-group",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{change:t.query},model:{value:t.params.flag,callback:function(e){t.$set(t.params,"flag",e)},expression:"params.flag"}},[a("el-radio-button",{attrs:{label:1}},[t._v("本周")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("本月")])],1),t._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.rangeTime},model:{value:t.dateArr,callback:function(e){t.dateArr=e},expression:"dateArr"}})],1)]),t._v(" "),a("div",{staticClass:"chart-style",attrs:{id:"chartLine"}}),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataInfo.list,stripe:""}},[a("el-table-column",{attrs:{prop:"create_time",label:"日期",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channel_name",label:"频道名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pv",label:"访问次数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"uv",label:"访问用户",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"uip",label:"独立ip",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"new_user",label:"新增用户",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"rate",label:"pv/uv",align:"center"}})],1)],1)},o=[],l={render:s,staticRenderFns:o},c=l,d=a("VU/8"),h=n,p=d(r,c,!1,h,"data-v-d1ad639e",null);e.default=p.exports},n892:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.data-item[data-v-d1ad639e] {\n  float: left;\n  min-width: 170px;\n  margin-top: 30px;\n}\n.data-item .data-title[data-v-d1ad639e] {\n    font-size: 12px;\n    color: #878d99;\n    margin-bottom: 17px;\n}\n.data-item .data-num[data-v-d1ad639e] {\n    color: #353535;\n    font-size: 24px;\n}\n.chart-style[data-v-d1ad639e] {\n  width: 100%;\n  height: 380px;\n  border-bottom: 1px dashed #eee;\n  margin-bottom: 15px;\n}\n",""])}});