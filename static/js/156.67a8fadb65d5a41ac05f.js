webpackJsonp([156],{"9T/O":function(t,e,i){var o=i("jxut");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("5dbdea0c",o,!0,{})},jxut:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'\n.bread-box {\n  display: -webkit-box;\n  display: flex;\n  display: -ms-flexbox;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.bread-box label {\n  color: #5a5e66;\n  font-size: 14px;\n}\n.type-bread {\n  margin-right: 12px;\n}\n.bread-items {\n  display: inline-block;\n}\n.bread-items a {\n  color: #1276c3;\n  font-size: 14px;\n}\n.bread-items a::after {\n  content: "/";\n  padding: 0 5px;\n  color: #1276c3;\n}\n.bread-items:last-child a::after {\n  content: "";\n  padding: 0 5px;\n  color: #1276c3;\n}\n.tree-left {\n  width: 200px;\n  float: left;\n}\n.tree-right {\n  margin-left: 200px;\n}\n.font-bold {\n  font-weight: bold;\n}\n.red-color {\n  color: red;\n}\n.cms-table-button {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  line-height: 1;\n  border-radius: 4px;\n  background: #000;\n  color: #fff;\n  position: relative;\n  text-align: center;\n  font-size: 14px;\n  top: -2px;\n  margin-left: 2px;\n  -webkit-transition: 0.2s;\n  transition: 0.2s;\n}\n.cms-table-button:first-child {\n    margin-left: 0px;\n}\n.cms-table-button:hover {\n    opacity: 0.65;\n}\n.cms-table-button.edit {\n    background: #17d57e;\n}\n.cms-table-button.edit::after {\n      content: \'\\E662\';\n      position: relative;\n      top: 5px;\n}\n.el-dropdown {\n  vertical-align: top;\n}\n.el-dropdown + .el-dropdown {\n  margin-left: 15px;\n}\n.el-icon-arrow-down {\n  font-size: 12px;\n}\n.el-button-group .el-button--success:last-child {\n  width: 50px;\n  min-width: 50px;\n}\n.el-dialog {\n  width: 80%;\n  margin-top: 50px !important;\n}\n',""])},kw6r:function(t,e,i){"use strict";function o(t){i("9T/O")}Object.defineProperty(e,"__esModule",{value:!0});var n=i("5HJ5"),l=(i("mtWM"),i("nSkA")),a={mixins:[n.a],data:function(){return{queryShop:{title:null,page:1,pageSize:10,sid:null,private:null},titleQueryEnable:!1,shopList:[],shopTotal:null,dialogFormVisible:!1,newShop:{id:null,title:null,subTitle:null,img:null,createTime:null,updateTime:null,siteId:null,private:!1,thirdUrl:null,type:1,thirdId:null},formLabelWidth:"120px",showImage:!0,currentMode:null,fillTitle:null,dataGroup:[]}},methods:{getShopList:function(t,e,i,o){var n=this,a=this.$api.shopList+"?sid="+t+"&page="+e+"&pageSize="+i;""!==o&&void 0!==o&&null!==o&&(a=a+"&title="+o),l.a.get(a).then(function(t){if(0==t.data.errorCode){n.shopList=t.data.data.list,n.shopTotal=t.data.data.total;for(var e in n.shopList)null!==n.shopList[e].createTime&&(n.shopList[e].createTime=Object(l.g)(n.shopList[e].createTime)),null!==n.shopList[e].updateTime&&(n.shopList[e].updateTime=Object(l.g)(n.shopList[e].updateTime))}else t.data.errorMessage?n.errorMessage(t.data.errorMessage):n.errorMessage("操作失败")}).catch(function(t){console.log(t)})},checkQueryTitle:function(){Object(l.f)(this.queryShop.title)||null==this.queryShop.title||void 0==this.queryShop.title?this.titleQueryEnable=!1:this.titleQueryEnable=!0},searchByTitle:function(){this.getShopList(this.queryShop.sid,this.queryShop.page,this.queryShop.pageSize,this.queryShop.title)},searchByPrivate:function(t){0==t?this.getShopList(this.queryShop.sid,this.queryShop.page,this.queryShop.pageSize,this.queryShop.title):this.getShopList(0,this.queryShop.page,this.queryShop.pageSize,this.queryShop.title)},getPages:function(t,e){this.queryShop.pageSize=e,this.queryShop.page=t,this.getShopList(this.queryShop.sid,this.queryShop.page,this.queryShop.pageSize,this.queryShop.title)},addShop:function(){this.currentMode="add",this.fillTitle="新增电商项",this.dialogFormVisible=!0,this.resetForm()},getUrl:function(t,e,i,o){this.newShop.img=t},sureAdd:function(){var t=this;this.postAdd(this.newShop,function(){t.dialogFormVisible=!1,t.getShopList(t.queryShop.sid,t.queryShop.page,t.queryShop.pageSize,null)})},postAdd:function(t,e){var i=this,o=this.$api.shopAdd;l.a.post(o,t).then(function(t){0==t.data.errorCode?(i.successMessage("操作成功"),e()):t.data.errorMessage?i.errorMessage(t.data.errorMessage):i.errorMessage("操作失败")}).catch(function(t){console.log(t)})},resetForm:function(){var t=this;for(var e in this.newShop)this.newShop[e]=null;this.showImage=!1,this.newShop.type=1,this.newShop.siteId=this.queryShop.sid,this.newShop.private=!1,setTimeout(function(){t.showImage=!0},100)},toEdit:function(t){this.resetForm(),this.newShop=t,this.dialogFormVisible=!0,this.currentMode="update",this.fillTitle="编辑电商项"},sureUpdate:function(){var t=this;this.newShop.createTime=null,this.newShop.updateTime=null,this.postAdd(this.newShop,function(){t.dialogFormVisible=!1,t.getShopList(t.queryShop.sid,t.queryShop.page,t.queryShop.pageSize,null)})},toDelete:function(t){var e=this,i=t.id;this.$confirm("确定删除电商项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.postDelete(i)}).catch(function(t){console.log(t)})},postDelete:function(t){var e=this,i=this.$api.shopDelete+"?ids="+t;l.a.put(i).then(function(t){0==t.data.errorCode?(e.successMessage("操作成功"),e.getShopList(e.queryShop.sid,e.queryShop.page,e.queryShop.pageSize,null)):t.data.errorMessage?e.errorMessage(t.data.errorMessage):e.errorMessage("操作失败")}).catch(function(t){console.log(t)})},multiDelete:function(t){this.dataGroup=t},deleteGroup:function(){var t=this,e=[];for(var i in this.dataGroup)e.push(this.dataGroup[i].id);this.$confirm("确定删除电商项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postDelete(e.join(","))}).catch(function(t){console.log(t)})},handleClose:function(){this.resetForm(),this.getShopList(this.queryShop.sid,this.queryShop.page,this.queryShop.pageSize,null)}},mounted:function(){var t=document.body.clientHeight;$(".cms-body").css("minHeight",t-110+"px"),this.$store.dispatch("setCollapse",!0)},created:function(){var t=window.localStorage.getItem("_site_id_param");this.queryShop.sid=t,this.newShop.siteId=t,this.getShopList(t,this.queryShop.page,this.queryShop.pageSize,null)}},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"cms-body"},[i("div",{staticStyle:{"margin-top":"20px","margin-bottom":"20px","margin-right":"20px","margin-left":"20px"}},[i("el-button",{attrs:{type:"success"},on:{click:t.addShop}},[t._v("新增电商项")]),t._v(" "),i("cms-input",{attrs:{label:"标题",width:240},on:{input:t.checkQueryTitle},model:{value:t.queryShop.title,callback:function(e){t.$set(t.queryShop,"title",e)},expression:"queryShop.title"}}),t._v(" "),t.titleQueryEnable?i("el-button",{attrs:{type:"primary"},on:{click:t.searchByTitle}},[t._v("查询")]):i("el-button",{attrs:{type:"primary",disabled:""}},[t._v("查询")]),t._v(" "),i("el-switch",{attrs:{"active-text":"公有","inactive-text":"私有"},on:{change:t.searchByPrivate},model:{value:t.queryShop.private,callback:function(e){t.$set(t.queryShop,"private",e)},expression:"queryShop.private"}})],1),t._v(" "),i("div",{staticStyle:{"margin-top":"20px","margin-bottom":"20px","margin-right":"20px","margin-left":"20px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.shopList,stripe:""},on:{"selection-change":t.multiDelete}},[i("el-table-column",{attrs:{type:"selection",width:"65",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"70"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",label:"标题",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"subTitle",label:"副标题",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"thirdUrl",label:"外链地址",align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return i("div",{},[1==e.row.type?i("span",[t._v(t._s(e.row.thirdUrl))]):t._e()])}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"thirdId",label:"内容id",align:"center",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return i("div",{},[2==e.row.type?i("span",[t._v(t._s(e.row.thirdId))]):t._e()])}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"img",label:"封面图",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return i("div",{},[null!=t.row.img&&void 0!=t.row.img?i("img",{attrs:{src:t.row.img,height:"100",width:"auto"}}):i("img",{attrs:{src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1540800848352&di=53c3301bb98d9cbaf75e6ed04e2e6d6a&imgtype=0&src=http%3A%2F%2F58pic.ooopic.com%2F58pic%2F14%2F70%2F68%2F34858PIC6sf_1024.jpg",height:"100",width:"auto"}})])}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"private",label:"权限",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return i("div",{},[0==e.row.private?i("span",[t._v("公有")]):t._e(),t._v(" "),1==e.row.private?i("span",[t._v("私有")]):t._e()])}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return 0!==e.row.siteId?i("div",{},[i("cms-button",{attrs:{type:"edit"},on:{click:function(i){t.toEdit(e.row)}}}),t._v(" "),i("cms-button",{attrs:{type:"delete"},on:{click:function(i){t.toDelete(e.row)}}})],1):t._e()}}])})],1),t._v(" "),i("div",{staticClass:"cms-list-footer",staticStyle:{"padding-bottom":"100px"}},[t.dataGroup.length>0?i("el-button",{attrs:{type:"info"},on:{click:t.deleteGroup}},[t._v("批量删除")]):i("el-button",{attrs:{type:"info",disabled:""}},[t._v("批量删除")]),t._v(" "),i("cms-pagination",{attrs:{total:t.shopTotal,pageSize:t.queryShop.pageSize,page:t.queryShop.page,init:!0},on:{change:t.getPages}})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.fillTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.handleClose}},[i("el-form",{attrs:{model:t.newShop}},[i("el-form-item",{attrs:{label:"标题","label-width":t.formLabelWidth}},[i("el-input",{model:{value:t.newShop.title,callback:function(e){t.$set(t.newShop,"title",e)},expression:"newShop.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"副标题","label-width":t.formLabelWidth}},[i("el-input",{model:{value:t.newShop.subTitle,callback:function(e){t.$set(t.newShop,"subTitle",e)},expression:"newShop.subTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"权限","label-width":t.formLabelWidth}},[i("el-radio-group",{model:{value:t.newShop.private,callback:function(e){t.$set(t.newShop,"private",e)},expression:"newShop.private"}},[i("el-radio",{attrs:{label:!1}},[t._v("公有")]),t._v(" "),i("el-radio",{attrs:{label:!0}},[t._v("私有")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"类型","label-width":t.formLabelWidth}},[i("el-radio-group",{model:{value:t.newShop.type,callback:function(e){t.$set(t.newShop,"type",e)},expression:"newShop.type"}},[i("el-radio",{attrs:{label:1}},[t._v("外链地址")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("内容id")])],1)],1),t._v(" "),"1"==t.newShop.type?i("el-form-item",{attrs:{label:"外链地址","label-width":t.formLabelWidth}},[i("el-input",{model:{value:t.newShop.thirdUrl,callback:function(e){t.$set(t.newShop,"thirdUrl",e)},expression:"newShop.thirdUrl"}})],1):t._e(),t._v(" "),"2"==t.newShop.type?i("el-form-item",{attrs:{label:"内容id","label-width":t.formLabelWidth}},[i("el-input",{attrs:{type:"number"},model:{value:t.newShop.thirdId,callback:function(e){t.$set(t.newShop,"thirdId",e)},expression:"newShop.thirdId"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"封面","label-width":t.formLabelWidth}},[t.showImage?i("uploader",{attrs:{default:t.newShop.img},on:{change:t.getUrl}}):t._e()],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),"add"==t.currentMode?i("el-button",{attrs:{type:"primary"},on:{click:t.sureAdd}},[t._v("确 定")]):t._e(),t._v(" "),"update"==t.currentMode?i("el-button",{attrs:{type:"warning"},on:{click:t.sureUpdate}},[t._v("更 新")]):t._e()],1)],1)],1)},s=[],p={render:r,staticRenderFns:s},h=p,u=i("VU/8"),d=o,c=u(a,h,!1,d,null,null);e.default=c.exports}});