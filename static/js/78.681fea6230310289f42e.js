webpackJsonp([78],{"6fek":function(n,t,a){t=n.exports=a("FZ+f")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},ClpW:function(n,t,a){var e=a("6fek");"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);a("rjj0")("a3edc45c",e,!0,{})},rIx1:function(n,t,a){"use strict";function e(n){a("ClpW")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("bOdI"),s=a.n(o),i=a("lcoF"),c=a("mtWM"),l=a.n(c),r=a("x1ym"),d=a("nSkA"),h={mixins:[i.a],data:function(){var n,t=r.a.required("此项必填");r.a.number("只能输入数字");return n={params:{queryUsername:"",https:""},domainCheck:!1,accessPathCheck:!1,rules:{name:[t],domain:[t],rootPath:[t],enable:[t],logo:[t]},ftpList:[],ossList:[],tplList:[],editTable:!1,dateList:!0},s()(n,"domainCheck",!1),s()(n,"accessPathCheck",!1),s()(n,"siteIdCheckRes",!1),n},methods:{siteIdCheck:function(n){var t=this;if(!n)return this.siteIdCheckRes=!1,!1;l.a.post(this.$api.siteCheckMaster,{siteId:""}).then(function(n){n.body.result||(t.siteIdCheckRes=!0,t.loading=!1)}).catch(function(n){t.loading=!1})},checkDomain:function(n){var t=this;if(""==n)return this.domainCheck=!1,!1;l.a.post(this.$api.siteCheckDomain,{siteId:"",domain:n}).then(function(n){n.body.result?(t.domainCheck=!1,t.loading=!1):(t.domainCheck=!0,t.loading=!1)}).catch(function(n){t.loading=!1})},checkAccessPath:function(n){var t=this;if(""==n)return this.accessPathCheck=!1,!1;l.a.post(this.$api.siteCheckAccessPath,{siteId:"",accessPath:n}).then(function(n){n.body.result?(t.accessPathCheck=!1,t.loading=!1):(t.accessPathCheck=!0,t.loading=!1)}).catch(function(n){t.loading=!1})},getUserInfo:function(){},save:function(){var n=localStorage.getItem("_site_id_param");this.domainCheck||this.accessPathCheck||this.siteIdCheckRes||(d.a.put(this.$api.site+"/"+n,{name:this.dataInfo.name,shortName:this.dataInfo.shortName,rootPath:this.dataInfo.rootPath,domin:this.dataInfo.domin,enable:this.dataInfo.enable,logo:this.dataInfo.logo}).then(function(n){console.log(n)}).catch(function(n){console.log(n)}),location.reload())},checkSiteId:function(){var n=this,t=localStorage.getItem("_site_id_param");d.a.get(this.$api.user).then(function(a){Object(d.c)(a),n.loading=!1,d.a.get(n.$api.site+"/"+t).then(function(t){n.dataInfo=t.data.data}).catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})}},created:function(){this.loading=!0,this.checkSiteId()}},f=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("section",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"cms-body"},[a("el-form",{ref:"form",staticClass:"cms-form",attrs:{model:n.dataInfo,rules:n.rules,"label-width":"162px"}},[a("el-form-item",{staticClass:"flex-50",attrs:{label:"名称",prop:"name"}},[a("el-input",{staticClass:"cms-width",model:{value:n.dataInfo.name,callback:function(t){n.$set(n.dataInfo,"name",t)},expression:"dataInfo.name"}})],1),n._v(" "),a("el-form-item",{staticClass:"flex-50",attrs:{label:"站点简称",prop:"shortName"}},[a("el-input",{staticClass:"cms-width",model:{value:n.dataInfo.shortName,callback:function(t){n.$set(n.dataInfo,"shortName",t)},expression:"dataInfo.shortName"}})],1),n._v(" "),a("el-form-item",{staticClass:"flex-50",attrs:{label:"域名",prop:"domain"}},[a("el-input",{staticClass:"cms-width",on:{change:n.checkDomain},model:{value:n.dataInfo.domain,callback:function(t){n.$set(n.dataInfo,"domain",t)},expression:"dataInfo.domain"}}),n._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:n.domainCheck,expression:"domainCheck"}],staticClass:"red"},[n._v("域名已存在，无法使用")])],1),n._v(" "),a("el-form-item",{staticClass:"flex-50",attrs:{label:"根目录",prop:"rootPath"}},[a("el-input",{staticClass:"cms-width",model:{value:n.dataInfo.rootPath,callback:function(t){n.$set(n.dataInfo,"rootPath",t)},expression:"dataInfo.rootPath"}}),n._v(" "),a("span",{staticClass:"gray"},[n._v("各站点资源的存放路径")])],1),n._v(" "),a("el-form-item",{staticClass:"flex-100",attrs:{label:"是否可用",prop:"enable"}},[a("el-radio",{attrs:{label:!0},model:{value:n.dataInfo.enable,callback:function(t){n.$set(n.dataInfo,"enable",t)},expression:"dataInfo.enable"}},[n._v("是")]),n._v(" "),a("el-radio",{attrs:{label:!1},model:{value:n.dataInfo.enable,callback:function(t){n.$set(n.dataInfo,"enable",t)},expression:"dataInfo.enable"}},[n._v("否")])],1),n._v(" "),a("el-form-item",{staticClass:"flex-100",attrs:{label:"站点图标",prop:"logo"}},[a("el-input",{staticClass:"cms-width",model:{value:n.dataInfo.logo,callback:function(t){n.$set(n.dataInfo,"logo",t)},expression:"dataInfo.logo"}}),n._v(" "),a("img",{attrs:{src:n.dataInfo.logo}})],1),n._v(" "),a("div",{staticClass:"form-footer"},[a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/siteConfig/edit",expression:"'/siteConfig/edit'"}],attrs:{type:"primary"},on:{click:function(t){n.save()}}},[n._v("提交")]),n._v(" "),a("el-button",{attrs:{type:"info"},on:{click:n.$reset}},[n._v("重置")])],1)],1)],1)},m=[],u={render:f,staticRenderFns:m},p=u,v=a("VU/8"),I=e,C=v(h,p,!1,I,null,null);t.default=C.exports}});